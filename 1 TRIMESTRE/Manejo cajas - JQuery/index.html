<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.1.9/dist/sweetalert2.all.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<title>Manejo de cajas - Plamen Atanasov</title>
	<script>
		$( function() {
			$( ".caja" ).draggable({
			  containment: "parent"
			});
			$( ".region" ).draggable({ disabled: true, containment: "parent" });
		} );

		function makeDraggable(e){

			console.log(e.target);

			if( e.target.className == "region" || e.target.className == "region ui-draggable ui-draggable-handle" || e.target.className == "region ui-draggable ui-draggable-handle ui-draggable-disabled" ){

				if( e.target.getAttribute("draggable") ){
					e.target.removeAttribute("draggable");
					$( ".region.ui-draggable.ui-draggable-handle" ).draggable( { disabled: true, containment: "parent" } );
				} else {
					e.target.setAttribute("draggable", "true");

					if (e.target.className == "region"){
						$( ".region" ).draggable( { disabled: false, containment: "parent" } );
					}else{
						$( ".region.ui-draggable.ui-draggable-handle.ui-draggable-disabled" ).draggable( { disabled: false, containment: "parent" } );
					}

				}

			}

		}


		document.ondblclick = makeDraggable;

	</script>
	<style>

		*{
			margin:0;
			padding:0;
			box-sizing:border-box;
		}

		body,html{
			background-color:white;
		}

		.container{
			margin-top:20px;
		}

		.caja{
			padding: 10px;
			background-color: rgba(0,150,250,0.5);
			width: 50px;
			height: 50px;
		}

		.cajas{
			padding: 20px;
			height: 100vh;
			width: 100%;

			z-index: 5;
		}

		.region{

			width:200px;
			height: 200px;

			background-color: rgba(0,0,0,0.2);

			resize:both;
			overflow: auto;

			z-index: 0;
		}

		.region[draggable~="true"]{
			background-color: rgba(0,150,0,0.2);
		}

		.region[draggable~="true"]::after{
			content: 'Me puedes mover';
			color: #fff;
			padding: 20px;
		}

	</style>
</head>
<body>

	<div class="container">

		<h1>Cajas</h1>
		<p>Desplazamiento de DIV's con JavaScript.</p>

		<button class="btn btn-success" onclick="crearMesa()">Agregar mesa</button>
		<button class="btn btn-success" onclick="crearRegion()">Agregar regi√≥n</button>

		<div class="cajas">

			<div class="caja"></div>

			<div class="region"></div>

		</div>


	</div>

	<script>



	</script>

</body>
</html>
